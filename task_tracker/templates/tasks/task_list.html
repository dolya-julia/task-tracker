{% extends "tracker/base.html" %}
{% load static %}

{% block title %}Kanban Board{% endblock %}  <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->

{% block content %}


    <div class="container">
        <div class="row">
             <div class="col-md-4">
                <div class="task-list">
                    <h2>–°–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á</h2>
                    <a href="{% url 'task_create' %}" class="btn btn-primary mb-3">–î–æ–±–∞–≤–∏—Ç—å –∑–∞–¥–∞—á—É</a>
                    <ul class="list-group">
                        {% for task in tasks %}
                        <li class="list-group-item d-flex justify-content-between align-items-center">
<!--                            <strong>{{ task.title }}</strong> ({{ task.status }})-->
                            <strong>{{ task.title }}</strong>
                            <a href="{% url 'task_update' task.pk %}" class="btn btn-sm btn-outline-secondary mr-5">‚úèÔ∏è –ò–∑–º–µ–Ω–∏—Ç—å</a>|
                            <a href="{% url 'task_delete' task.pk %}" class="btn btn-sm btn-outline-danger">üóë –£–¥–∞–ª–∏—Ç—å</a>
                        </li>
                        {% empty %}
                        <p>–ó–∞–¥–∞—á –ø–æ–∫–∞ –Ω–µ—Ç.</p>
                        {% endfor %}
                    </ul>
                </div>
            </div>
             <div class="col-md-8">
                <div class="board">

                    <div class="lanes d-flex">
                      <div class="swim-lane" id="todo-lane">
                        <h3 class="heading">–ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é</h3>
                        {% for task in tasks %}
                          {% if task.status == 'pending' %}
                            <div class="task" draggable="true" data-task-id="{{ task.pk }}">
                              <strong>{{ task.title }}</strong>
                              <p>{{ task.description|truncatechars:100 }}</p>
                            </div>
                          {% endif %}
                        {% endfor %}
                      </div>

                      <div class="swim-lane"  id="in_progress-lane">
                        <h3 class="heading">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</h3>
                        {% for task in tasks %}
                          {% if task.status == 'in_progress' %}
                            <div class="task" draggable="true" data-task-id="{{ task.pk }}">
                              <strong>{{ task.title }}</strong>
                              <p>{{ task.description|truncatechars:100 }}</p>
                            </div>
                          {% endif %}
                        {% endfor %}
                      </div>

                      <div class="swim-lane" id="completed-lane">
                        <h3 class="heading">–ì–æ—Ç–æ–≤–æ</h3>
                        {% for task in tasks %}
                          {% if task.status == 'completed' %}
                            <div class="task" draggable="true" data-task-id="{{ task.pk }}">
                              <strong>{{ task.title }}</strong>
                              <p>{{ task.description|truncatechars:100 }}</p>
                            </div>
                          {% endif %}
                        {% endfor %}
                      </div>
                    </div>
                  </div>
                 </div>
               </div>
            </div>
  <link rel="stylesheet" href="{% static 'css/styles.css' %}">
  <script src="{% static 'js/drag.js' %}" defer></script>
  <script src="{% static 'js/todo.js' %}" defer></script>
{% endblock %}